# Metasploit

Exploit -&gt; Payload -&gt; Post Modules

Auxiliary

Modules:

* Exploits
* Payloads
* Auxiliary
* Encoders
* Nops

![](../.gitbook/assets/metasploit-structure.png)

## Initialise the Database

Start postgresql

```text
service postgresql start
```

Initialize the database

```text
msfdb init
```

In msfconsole, rebuild cache

```text
msf> db_rebuild_cache
```

## Basic Usage

get information on an exploit

```text
msf> info [exploit]
```

set options

```text
msf> set payload windows/shell/reverse_tcp
```

show options

```text
msf> show options
```

run exploit:

```text
msf > run` or `msf> exploit
```

run exploit as a job in background:

```text
msf> exploit -j
```

list a list of background job:

```text
msf> jobs
```

get a list of sessions:

```text
msf> sessions -l
```

open a session:

```text
msf > sessions -i [N]
```

where N is session number

stop an exploit:  
`[CTRL-C]`

go back to msfconsole with terminating the shell:  
`[CTRL-Z]`

kill session:

```text
msf> sessions -K
```

exit:

```text
msf> exit
```

## Run Metasploit with script

### Creating Resource Script

```text
msf (ms08_067_netapi) > makerc ~/Desktop/myscript.rc
```

Resource script location

```text
/path/to/metasploit-framework/scripts/resource
```

### Running Resource Script

```text
$ ./msfconsole -r <path to resource script>
```

```text
msf > resource <path to resource script> [param 1] [param 2] [param 3]
```

